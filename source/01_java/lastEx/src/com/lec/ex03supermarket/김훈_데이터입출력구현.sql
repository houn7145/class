-- 테이블 및 시퀀스 삭제
DROP TABLE CUSTOMER;
DROP TABLE CUSLEVEL;
DROP SEQUENCE CUSTOMER_ID_SQ;

-- 테이블 및 시퀀스 생성

CREATE TABLE CUSLEVEL (
    LEVELNO NUMBER(1) PRIMARY KEY,
    LEVELNAME VARCHAR2(20)  NOT NULL,
    LOAMT NUMBER(20) CHECK (LOAMT >=0),
    HIAMT NUMBER(20) CHECK (HIAMT >=0)
);

CREATE TABLE CUSTOMER (
    ID NUMBER(5) PRIMARY KEY,
    TEL VARCHAR2(30) NOT NULL UNIQUE,
    CNAME VARCHAR2(50) NOT NULL,
    POINT NUMBER(5) DEFAULT 1000 CHECK(POINT >= 0), 
    CUM_AMT NUMBER(20) DEFAULT 0,
    LEVELNO NUMBER(1) DEFAULT 1 REFERENCES CUSLEVEL(LEVELNO)
);
CREATE SEQUENCE CUSTOMER_ID_SQ
    MAXVALUE 99999
    NOCACHE
    NOCYCLE;

SELECT * FROM CUSLEVEL;
SELECT * FROM CUSTOMER;

-- 더미데이터 insert
INSERT INTO CUSLEVEL VALUES (1, 'NORMAL', 0, 50000);
INSERT INTO CUSLEVEL VALUES (2, 'SILVER', 50001, 100000);
INSERT INTO CUSLEVEL VALUES (3, 'GOLD', 100001, 150000);
INSERT INTO CUSLEVEL VALUES (4, 'VIP', 150001, 200000);
INSERT INTO CUSLEVEL VALUES (5, 'VVIP', 200001, 9999999);

INSERT INTO CUSTOMER (ID, TEL, CNAME, CUM_AMT) VALUES (CUSTOMER_ID_SQ.NEXTVAL, '010-8888-7777', '홍길동', 60000);
INSERT INTO CUSTOMER (ID, TEL, CNAME) VALUES (CUSTOMER_ID_SQ.NEXTVAL, '010-9999-9999', '마길동');
INSERT INTO CUSTOMER (ID, TEL, CNAME) VALUES (CUSTOMER_ID_SQ.NEXTVAL, '010-9999-9959', '김길동');